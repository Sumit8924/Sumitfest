<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Registration – FESTRONIX 2.0 (Bootstrap O(1))</title>
    
    <!-- BOOTSTRAP 5 + ICONS + FONTS – O(1) LAYOUT -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Orbitron:wght@400;600;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ========== O(1) THEME – minimal, direct, no complex loops ========== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* ----- VIDEO BACKGROUND ----- */
        .video-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            overflow: hidden;
        }
        .video-background video {
            width: 100%; height: 100%; object-fit: cover;
        }
        .video-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 1;
        }
        
        /* ----- MAIN CONTAINER – BOOTSTRAP OVERRIDES O(1) ----- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
        }
        
        /* ----- HEADER ----- */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 2px solid #ff9966;
            box-shadow: 0 0 30px rgba(255,153,102,0.3);
        }
        .header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            color: #ff9966;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        .header p { color: #ffcc33; font-size: 1.2rem; }
        .info-item {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 20px; background: rgba(255,153,102,0.1);
            border-radius: 10px; border: 1px solid rgba(255,153,102,0.3);
        }
        
        /* ----- FORM CONTAINER (GLASS) ----- */
        .form-container {
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            border: 2px solid rgba(255,153,102,0.3);
            box-shadow: 0 0 40px rgba(255,153,102,0.2);
        }
        .form-header h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: #ff9966;
            margin-bottom: 10px;
        }
        .google-form-wrapper {
            width: 100%;
            min-height: 800px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            overflow: hidden;
        }
        .google-form-wrapper iframe {
            width: 100%;
            height: 800px;
            border: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        /* ----- PROGRESS STEPS (O(1) no loops) ----- */
        .step-circle {
            width: 50px; height: 50px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 1.2rem;
        }
        .step-circle.completed {
            background: linear-gradient(145deg, #ff9966, #ff6600);
            color: white; box-shadow: 0 0 20px rgba(255,153,102,0.5);
        }
        .step-circle.current {
            background: rgba(255,153,102,0.2); border: 2px solid #ff9966; color: #ff9966;
        }
        .step-circle.pending {
            background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); color: #ccc;
        }
        .step-line {
            width: 100px; height: 3px; background: rgba(255,255,255,0.2);
        }
        .step-line.completed { background: linear-gradient(90deg, #ff9966, #ff6600); }
        
        /* ----- BUTTONS ----- */
        .btn-back {
            background: transparent; border: 2px solid #ff9966; color: #ff9966;
            padding: 12px 30px; border-radius: 10px; font-weight: 600;
            transition: 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 10px;
        }
        .btn-back:hover { background: rgba(255,153,102,0.1); transform: translateX(-5px); color: #ffcc33; }
        .btn-submit {
            background: linear-gradient(145deg, #ff9966, #ff6600); color: white;
            padding: 12px 30px; border: none; border-radius: 10px; font-weight: 600;
            transition: 0.3s; box-shadow: 0 5px 20px rgba(255,153,102,0.3);
        }
        .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255,153,102,0.5); }
        
        /* ----- INSTRUCTIONS ----- */
        .form-instructions {
            margin-top: 30px; padding: 25px;
            background: rgba(255,153,102,0.1); border-radius: 15px;
            border: 1px solid rgba(255,153,102,0.3);
        }
        .instructions-list li {
            padding: 8px 0; color: #fff; display: flex; align-items: center; gap: 10px;
        }
        .instructions-list li i { color: #ff9966; }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2.5rem; }
            .form-header h2 { font-size: 2rem; }
            .google-form-wrapper iframe { height: 600px; }
            .step-line { width: 50px; }
        }
        @media (max-width: 480px) {
            .header h1 { font-size: 2rem; }
            .form-header h2 { font-size: 1.8rem; }
            .google-form-wrapper iframe { height: 500px; }
            .step-line { width: 30px; }
        }
    </style>
</head>
<body>
    <!-- VIDEO BACKGROUND -->
    <div class="video-background">
        <video autoplay muted loop playsinline>
            <source src="light.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
    </div>

    <!-- MAIN CONTENT – BOOTSTRAP GRID O(1) -->
    <div class="container">
        <!-- HEADER CARD -->
        <div class="header">
            <h1>FESTRONIX 2.0</h1>
            <p class="text-warning">Official Registration Form</p>
            <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
                <div class="info-item">
                    <i class="fas fa-calendar-alt text-warning"></i>
                    <span id="eventDate" class="text-white">24-25 March 2026</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock text-warning"></i>
                    <span id="eventTime" class="text-white">9:00 AM - 6:00 PM</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt text-warning"></i>
                    <span id="eventVenue" class="text-white">Main Auditorium</span>
                </div>
            </div>
        </div>

        <!-- PROGRESS INDICATOR – O(1) constant steps -->
        <div class="d-flex align-items-center justify-content-center gap-2 gap-md-4 flex-wrap mb-5">
            <div class="text-center">
                <div class="step-circle completed mx-auto">
                    <i class="fas fa-check"></i>
                </div>
                <span class="step-label d-block mt-2 text-secondary">Instructions</span>
            </div>
            <div class="step-line completed"></div>
            <div class="text-center">
                <div class="step-circle current mx-auto">2</div>
                <span class="step-label d-block mt-2 text-secondary">Registration</span>
            </div>
            <div class="step-line"></div>
            <div class="text-center">
                <div class="step-circle pending mx-auto">3</div>
                <span class="step-label d-block mt-2 text-secondary">Confirmation</span>
            </div>
        </div>

        <!-- FORM CONTAINER -->
        <div class="form-container">
            <div class="form-header text-center mb-4">
                <div class="category-icon fs-1 text-warning" id="categoryIcon">
                    <i class="fas fa-code"></i>
                </div>
                <h2 id="eventTitle">Event Registration</h2>
                <p id="eventDescription" class="text-white-50">Fill out the form below to complete your registration</p>
            </div>

            <!-- GOOGLE FORM IFRAME -->
            <div class="google-form-wrapper">
                <iframe id="googleFormIframe" 
                        src="about:blank"
                        frameborder="0" 
                        marginheight="0" 
                        marginwidth="0"
                        title="Google Form"
                        onload="this.style.opacity=1;">
                </iframe>
            </div>

            <!-- INSTRUCTIONS CARD -->
            <div class="form-instructions mt-5">
                <h3 class="text-warning d-flex align-items-center gap-2 mb-3">
                    <i class="fas fa-info-circle"></i> Important Instructions
                </h3>
                <ul class="instructions-list list-unstyled">
                    <li><i class="fas fa-check-circle"></i> Fill all fields marked with * (required)</li>
                    <li><i class="fas fa-check-circle"></i> Ensure your email address is correct</li>
                    <li><i class="fas fa-check-circle"></i> Team details are required for team events</li>
                    <li><i class="fas fa-check-circle"></i> You will receive a confirmation email after submission</li>
                    <li><i class="fas fa-check-circle"></i> Contact us if you face any issues</li>
                </ul>
            </div>

            <!-- FOOTER ACTIONS -->
            <div class="d-flex flex-wrap justify-content-between align-items-center mt-5 pt-4 border-top border-secondary">
                <a href="events.html" class="btn-back mb-2 mb-sm-0">
                    <i class="fas fa-arrow-left"></i> Back to Events
                </a>
                <button class="btn-submit" id="submitFormBtn">
                    <i class="fas fa-paper-plane me-2"></i> Submit Form
                </button>
            </div>
        </div>
    </div>

    <!-- O(1) JAVASCRIPT – CONSTANT-TIME REGISTRATION LOGIC -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function() {
            "use strict";
            // ========== O(1) CONSTANT-TIME LOOKUP – NO LOOPS, DIRECT OBJECT ACCESS ==========
            
            // ----- FORM URLS (O(1) hash) -----
            const GOOGLE_FORMS = {
                'Hackathon': 'https://docs.google.com/forms/d/e/1FAIpQLSfIUdRMlLC2VpMfqEBrgBoIB-s7gDsuBVsBx433C-DkOLjVsg/viewform?usp=dialog',
                'RoboWars Extreme': 'https://docs.google.com/forms/d/e/1FAIpQLSdM59d6bXyXBNK7KMX0bPH4VzuX3I-F_OstzReKe358sfxr6g/viewform?usp=header',
                'RoboWarsExtreme': 'https://docs.google.com/forms/d/e/YOUR_ROBOWARS_FORM_ID/viewform?embedded=true',
                'Treasure Hunt': 'https://docs.google.com/forms/d/e/YOUR_TREASURE_HUNT_FORM_ID/viewform?embedded=true',
                'TreasureHunt': 'https://docs.google.com/forms/d/e/YOUR_TREASURE_HUNT_FORM_ID/viewform?embedded=true',
                'AI & Machine Learning Workshop': 'https://docs.google.com/forms/d/e/YOUR_AI_WORKSHOP_FORM_ID/viewform?embedded=true',
                'AIWorkshop': 'https://docs.google.com/forms/d/e/YOUR_AI_WORKSHOP_FORM_ID/viewform?embedded=true',
                'Line Follower Robot Challenge': 'https://docs.google.com/forms/d/e/YOUR_LINE_FOLLOWER_FORM_ID/viewform?embedded=true',
                'LineFollowerRobot': 'https://docs.google.com/forms/d/e/YOUR_LINE_FOLLOWER_FORM_ID/viewform?embedded=true',
                'Digital Doodle Contest': 'https://docs.google.com/forms/d/e/YOUR_DIGITAL_DOODLE_FORM_ID/viewform?embedded=true',
                'DigitalDoodle': 'https://docs.google.com/forms/d/e/YOUR_DIGITAL_DOODLE_FORM_ID/viewform?embedded=true',
                'Gaming Prelims': 'https://docs.google.com/forms/d/e/YOUR_GAMING_FORM_ID/viewform?embedded=true',
                'GamingPrelims': 'https://docs.google.com/forms/d/e/YOUR_GAMING_FORM_ID/viewform?embedded=true',
                'Tech Quiz Finals': 'https://docs.google.com/forms/d/e/YOUR_TECH_QUIZ_FORM_ID/viewform?embedded=true',
                'TechQuiz': 'https://docs.google.com/forms/d/e/YOUR_TECH_QUIZ_FORM_ID/viewform?embedded=true',
                'Circuit Design Competition': 'https://docs.google.com/forms/d/e/YOUR_CIRCUIT_DESIGN_FORM_ID/viewform?embedded=true',
                'CircuitDesign': 'https://docs.google.com/forms/d/e/YOUR_CIRCUIT_DESIGN_FORM_ID/viewform?embedded=true',
                'Battle of Bands': 'https://docs.google.com/forms/d/e/YOUR_BATTLE_BANDS_FORM_ID/viewform?embedded=true',
                'BattleOfBands': 'https://docs.google.com/forms/d/e/YOUR_BATTLE_BANDS_FORM_ID/viewform?embedded=true',
                'default': 'https://docs.google.com/forms/d/e/1FAIpQLSdyyQ6hfF_mSuO8N4r9Q0KvSn82kVT8vFz2cjOeuKZSYDmsKQ/viewform?embedded=true'
            };
            
            // ----- EVENT DESCRIPTIONS (O(1) lookup) -----
            const EVENT_DESCRIPTIONS = {
                'Hackathon': '24-hour national level hackathon focusing on AI/ML solutions for real-world problems. Build innovative projects and win exciting prizes.',
                'RoboWars Extreme': 'Battle of the bots! Design and build your combat robot to defeat opponents in the arena. Test your engineering skills.',
                'Treasure Hunt': 'Solve clues, find hidden treasures, and race against time in this exciting treasure hunt. Test your problem-solving skills and teamwork.',
                'AI & Machine Learning Workshop': 'Hands-on workshop on AI and ML fundamentals. Learn from industry experts and build your first machine learning model.',
                'Line Follower Robot Challenge': 'Design and build autonomous robots that can follow a line path with maximum speed and accuracy.',
                'Digital Doodle Contest': 'Showcase your digital art skills in this creative competition. Use any digital medium to create stunning artwork.',
                'Gaming Prelims': 'Qualify for the main gaming tournament. Compete against other gamers in various esports titles.',
                'Tech Quiz Finals': 'Test your technical knowledge in this challenging quiz competition. Questions from various domains of technology.',
                'Circuit Design Competition': 'Design and build innovative circuits to solve given problems. Showcase your electronics skills.',
                'Battle of Bands': 'Showcase your musical talent in this exciting competition. Perform and compete with other bands.',
                'default': 'Complete the registration form below to participate in this exciting event.'
            };
            
            // ----- CATEGORY ICONS (O(1)) -----
            const CATEGORY_ICONS = {
                'technical': 'fas fa-code',
                'robotics': 'fas fa-robot',
                'gaming': 'fas fa-gamepad',
                'workshop': 'fas fa-chalkboard-teacher',
                'cultural': 'fas fa-music',
                'default': 'fas fa-calendar-alt'
            };

            // ----- GET URL PARAMETERS (O(1) direct) -----
            function getUrlParams() {
                const params = new URLSearchParams(window.location.search);
                return {
                    event: params.get('event') || 'Hackathon',
                    date: params.get('date') || '24-25 March 2026',
                    time: params.get('time') || '9:00 AM - 6:00 PM',
                    venue: params.get('venue') || 'Main Auditorium',
                    category: params.get('category') || 'technical'
                };
            }

            // ----- UPDATE PAGE – O(1) DIRECT DOM ASSIGNMENTS -----
            function updatePage() {
                const p = getUrlParams();
                
                // Direct element updates (constant time)
                const titleEl = document.getElementById('eventTitle');
                if (titleEl) titleEl.textContent = p.event + ' Registration';
                
                const dateEl = document.getElementById('eventDate');
                if (dateEl) dateEl.textContent = p.date;
                
                const timeEl = document.getElementById('eventTime');
                if (timeEl) timeEl.textContent = p.time;
                
                const venueEl = document.getElementById('eventVenue');
                if (venueEl) venueEl.textContent = p.venue;
                
                // Description lookup O(1)
                const desc = EVENT_DESCRIPTIONS[p.event] || 
                            EVENT_DESCRIPTIONS[p.event.replace(/\s+/g, '')] || 
                            EVENT_DESCRIPTIONS['default'];
                const descEl = document.getElementById('eventDescription');
                if (descEl) descEl.textContent = desc;
                
                // Icon lookup O(1)
                const iconClass = CATEGORY_ICONS[p.category] || CATEGORY_ICONS['default'];
                const iconEl = document.getElementById('categoryIcon');
                if (iconEl) iconEl.innerHTML = `<i class="${iconClass}"></i>`;
                
                // Page title
                document.title = p.event + ' Registration - FESTRONIX 2.0';
                
                // Load form O(1)
                const iframe = document.getElementById('googleFormIframe');
                if (iframe) {
                    let formUrl = GOOGLE_FORMS[p.event] || 
                                  GOOGLE_FORMS[p.event.replace(/\s+/g, '')] || 
                                  GOOGLE_FORMS['default'];
                    iframe.src = formUrl;
                    iframe.style.opacity = '0'; // will be set to 1 on load
                }
            }

            // ----- SUBMIT FORM (O(1) attempt) -----
            window.submitForm = function() {
                const iframe = document.getElementById('googleFormIframe');
                if (!iframe) return;
                
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    if (iframeDoc.forms.length > 0) {
                        const form = iframeDoc.forms[0];
                        
                        // Check required fields (constant time, small n)
                        const required = iframeDoc.querySelectorAll('input[required], select[required], textarea[required]');
                        let allFilled = true;
                        for (let i = 0; i < required.length; i++) {
                            const input = required[i];
                            if (!input.value.trim()) {
                                allFilled = false;
                                input.style.borderColor = '#ff3366';
                                input.style.boxShadow = '0 0 5px rgba(255,51,102,0.5)';
                            } else {
                                input.style.borderColor = '';
                                input.style.boxShadow = '';
                            }
                        }
                        
                        if (!allFilled) {
                            alert('Please fill all required fields marked with *');
                            return;
                        }
                        
                        form.submit();
                        setTimeout(() => {
                            alert('Registration submitted successfully! You will receive a confirmation email shortly.');
                            window.location.href = 'events.html?registered=true';
                        }, 1000);
                    } else {
                        alert('Form not loaded yet. Please wait a moment and try again.');
                    }
                } catch (e) {
                    console.warn('Cannot access iframe directly. Please submit via Google Form button.');
                    alert('Please submit the form directly within the Google Form iframe. Look for the submit button inside the form.');
                }
            };

            // ----- ATTACH SUBMIT BUTTON O(1) -----
            const submitBtn = document.getElementById('submitFormBtn');
            if (submitBtn) {
                submitBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.submitForm();
                });
            }

            // ----- IFRAME LOAD HANDLER (O(1)) -----
            const iframe = document.getElementById('googleFormIframe');
            if (iframe) {
                iframe.addEventListener('load', function() {
                    this.style.opacity = '1';
                });
            }

            // ----- INITIALIZE ON DOM READY -----
            document.addEventListener('DOMContentLoaded', function() {
                updatePage();
                // iframe already has load listener
            });

            // ----- PREVENT SCROLL ZOOM -----
            let lastTouch = 0;
            document.addEventListener('touchend', function(e) {
                const now = Date.now();
                if (now - lastTouch <= 300) e.preventDefault();
                lastTouch = now;
            }, false);
        })();
    </script>
</body>
</html>